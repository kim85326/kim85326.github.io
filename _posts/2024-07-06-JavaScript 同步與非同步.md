---
layout: post
title: "JavaScript 同步與非同步"
date: 2024-07-06 00:00:00 +0800
categories: 前端開發
tags: ["JavaScript"]
mathjax: true
description: ""
---

### JavaScript 是單執行緒

由於 JavaScript 是單執行緒的，這意味著一次只能執行一個任務。如果某個任務需要等待（例如網路請求或 I/O 操作），這會阻塞整個執行過程。為了避免這種情況，我們可以使用非同步。在非同步中，可以在等待的同時繼續執行其他操作，從而更有效地利用系統資源，提升應用程式的效能和使用者體驗。

### 什麼是同步？

同步是指程式碼在執行時需要按順序進行，後一個操作必須等待前一個操作完成後才能開始。在 JavaScript 中，這意味著如果一段程式碼是同步的，整個執行流程會被阻塞，直到該段程式碼完成為止。

#### 同步例子：排隊買票

想像你和朋友一起去電影院看電影，這是同步操作的例子：

1. 你們排在售票處的隊伍裡
2. 每個人依次買票，前面的人買完票後才輪到你
3. 你只能等前面的人買完票，然後才輪到你們

在這個例子中，買票的過程必須按順序進行，不能同時進行，所以這是同步的

```js
function buyTicket() {
  console.log("正在購買票...");
  console.log("票已購買！");
}

buyTicket();
console.log("享受電影！");
```

在這段程式碼中，`buyTicket` 函數必須完全執行完畢後，才會繼續執行後面的 `console.log("享受電影！")`。

### 什麼是非同步？

非同步是指程式碼執行不必按順序進行，可以在等待某個操作完成的同時繼續執行其他操作。在 JavaScript 中，常用的非同步方式包括回呼函數、`Promises` 和 `async/await`。

#### 非同步例子：網上買票

現在，想像你和朋友一起在網路上購票，這是非同步操作的例子：

1. 你打開購票網站，選擇電影和場次，並提交訂單
2. 網站在後台處理你的訂單，同時處理其他人的訂單
3. 在等待購票確認的同時，你可以瀏覽其他電影資訊，或做其他事情

在這個例子中，購票和確認的過程是非同步的。你提交訂單後，網站可以同時處理多個訂單，你也不必等待其他人的訂單處理完成才能處理你的訂單。

```js
function buyTicketAsync() {
  return new Promise((resolve) => {
    console.log("正在購買票...");
    setTimeout(() => {
      console.log("票已購買！");
      resolve();
    }, 2000); // 模擬網絡延遲
  });
}

buyTicketAsync().then(() => {
  console.log("享受電影！");
});

console.log("等待購票時做其他事情...");
```

在這段程式碼中，`buyTicketAsync` 函數返回一個 `
