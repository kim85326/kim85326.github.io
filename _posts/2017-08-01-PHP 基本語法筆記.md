---
layout: post
title: "PHP 基本語法筆記"
date: 2017-08-01 00:00:00 +0800
categories: PHP
tags: PHP
mathjax: true
---

- 副檔名 .php
- 語法以 `<?php ?>` 宣告
- 以分號 ; 為結尾

### 宣告常數

- 利用 define 宣告常數
- 變數不需要宣告

```php
<?php
define("GREETING", "Welcome!");
echo GREETING;	// 輸出 Welcome!
?>
```

### 變數命名

- 以 \$ 作為開頭
- 以 \_ 或 a-z 或 A-Z 開頭 (不可以數字開頭)
- 弱型別

```php
<?php
$name = 'Elaine';
?>
```

### 輸出

- echo - 能夠輸出一个以上的字符串
- print - 只能輸出一个字符串，並 return 1
- 提示：echo 比 print 稍快，因為它不用 return

```php
<?php
echo "hello world";
?>
```

```php
<?php
print "hello world";
?>
```

```php
<?= "hello world"?>
```

### 資料型別

- 整數 integer
- 浮點數 float
- 布林值 boolean
- 字串 string
- 陣列 array

```php
<?php
$array1 = array(1, 2, 3, 4, 5);    // 5.3 以前的陣列寫法
$array1 = [
    ['id' => 1, 'name' => 'Elaine'],
    ['id' => 2, 'name' => 'Wei'],
];    // 5.4 以後的陣列寫法
?>
```

- 物件 object

```php
<?php
$obj1 = new MyObj;
$obj1->method();
?>
```

- 資源 resource

```php
<?php
$handle = fopen("/* file path */", "r");
?>
```

### 強制轉型

```php
$var = "0";    // 字串
$cast = (int)$var;    // 強制轉型為整數
```

### 運算子

##### 字串運算子

```php
<?php
$a = "我想學會";
$b = "PHP！";
$a = $a.$b;  // $a 與 $b 的內容被結合後存入了變數 $a 的容器裡面
?>
```

英文字母的「.」在 PHP 程式中是字串運算子，可以將句號兩邊的字串結合起來。

##### 算數運算子

```php
<?php
    echo $a;  // 執行的結果會輸出「我想學會PHP！」
    $a = 10;
    echo $a + 1;  // 執行的結果會輸出「11」
?>
```

- `+`（加法）
- `-`（減法）
- `*`（乘法）
- `/`（除法）
- `%`（取餘數）

PHP7 新運算方法

```php
<?php
intdiv(被除數,除數); //回傳除法的商
?>
```

##### 比較運算子

- `==`（等於）
- `!=`（不等於）
- `>`（大於）
- `<`（小於）
- `>=`（大於等於）
- `<=`（小於等於）
- `===` (全等) 不只值要相等，資料型態也要相等

##### 邏輯運算子

- `and`、`&&`（與）
- `or`、`||`（或）
- `xor`（僅一）
- `!`（不是）

### 控制結構

- if…
- if…else…
- if…elseif…else…
- switch
- ?:（三元運算）

##### 三元運算

1. echo 條件?子句一:子句二;　//直接輸出結果
2. 變數==(條件)?子句一:子句二;　//將結果存入變數

```php
<?php
$nickname = $_GET["nickname"];  //取得網址列傳來的變數 nickname
echo $nickname == "" ? "Guest" : $nickname;  //直接輸出結果
?>
```

說明：如果 nickname（暱稱）為空字串，輸出「Guest」，否則輸出 \$nickname。

### 從網址列輸入變數

\$\_GET["變數名稱"] 來取得網址列傳來的變數

```php
<?php
    $h = $_GET["h"];  //取得網址列傳來的 h
    $w = $_GET["w"];  //取得網址列傳來的 w

    if($h==""){  //如果 $h 的內容為空字串
      $h = 1.72;  //身高（單位：公尺）
    }

    if($w==""){  //如果 $w 的內容為空字串
      $w = 60;  //體重（單位：公斤）
    }

    echo "您的BMI = ".$w / ($h * $h);  //輸出
?>
```

例如 url 是 `http://localhost/myweb/index.php?h=1.8&w=60`
output => 您的 BMI = 18.518518518519

### 迴圈

- PHP 程式內建的迴圈有：
- while
- do…while
- for
- foreach

- break;
  - break 是為迴圈中的指令，在迴圈執行的過程中，如果遇到 break 會跳出迴圈。
- continue;
  - 在迴圈中遇到 continue 時，程式運算會直接跳到條件判斷處繼續執行。

##### foreach

1. `foreach(陣列名稱 as $value) statement`
2. `foreach(陣列名稱 as $key => $value) statement`

```php
<?php
$arr = array("1" => "111", "2" => "222", "3" => "333");
foreach($arr as $key => $value) {
	echo $key." => ".$value."<br/>";
}
?>
```

output =>

```
1 => 111
2 => 222
3 => 333
```

### 陣列

```php
<?php
$student[1] = "郝康德";
$student[2] = "孫大同";
$student[3] = "謝安真";
?>
```

```php
<?php
$student = array(  //陣列的名稱叫 $student
	1 => "郝康德",
	2 => "孫大同",
	3 => "謝安真"
);
?>
```

```php
<?php
$student = array(  //陣列的名稱叫 $student
	1 => "郝康德",
	2 => "孫大同",
	3 => "謝安真"
);
?>
```

當陣列成員沒有指定鍵時，預設的鍵順序是 0,1,2,3…，所以也可以寫成：

```php
<?php
$student=array(
	"",  //陣列的第一筆資料預設的鍵是0，因為沒有人，保留空白。
	"郝康德",  //這裡才是1號
	"孫大同",
	"謝安真"
);
?>
```

##### 陣列排序用的函數

`ksort(陣列名稱);`

```php
<?php
ksort($student);  //用 ksort 函數將陣列 $student 重新排序
foreach($student as $key => $value){
  echo '$student['.$key."]"."：".$student[$key]."<br>";
}
?>
```

| 函數              | 依..排序 | 保留             | 排序方式               | 相關函數      |
| ----------------- | -------- | ---------------- | ---------------------- | ------------- |
| array_multisort() | 內容     | 組合的、非數字的 | 第一個陣列或排序的選項 | array_walk()  |
| asort()           | 內容     | 是               | 升冪排列               | arsort()      |
| arsort()          | 內容     | 是               | 降冪排列               | asort()       |
| krsort()          | 鍵       | 是               | 降冪排列               | ksort()       |
| ksort()           | 鍵       | 是               | 升冪排列、自然排列     | natsort()     |
| natcasesort()     | 內容     | 是               | 不論字母的大小寫       | natsort()     |
| natsort()         | 內容     | 是               | 自然排列               | natcasesort() |
| rsort()           | 內容     | 否               | 降冪排列               | sort()        |
| shuffle()         | 內容     | 否               | 亂數排列               | array_rand()  |
| sort()            | 內容     | 否               | 升冪排列               | rsort()       |
| uasort()          | 內容     | 是               | 由使用者定義           | uksort()      |
| uksort()          | 鍵       | 是               | 由使用者定義           | uasort()      |
| usort()           | 內容     | 否               | 由使用者定義           | uasort()      |

### 自訂函數

```
function 自訂函數的名稱(參數) {
	//程式
}
```

- 先宣告後宣告都可以
- 參數可以設預設值

```
function 自訂函數的名稱(引數=預設值){
	//程式
}
```

### 參考資料

- [TwHappy 部落格](http://www.twhappy.com/index.php?action=show&no=96)
